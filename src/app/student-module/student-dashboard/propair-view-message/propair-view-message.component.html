<div class="customsht-screen">
  <div class="stud-lib-chat-m">
    <div class="row">
  
      <div class="col-md-12">
        <div class="library_function">
          <h3> <a  class="backarrow"><img src="assets/images/backarr.png" alt="img" routerLink="/student-module/dashboard/student-my-message/propair-support"></a><span style="cursor: pointer;" routerLink="/student-module/dashboard/student-my-message/propair-support">Propair Support Message Exchange</span></h3>
        </div>
        <div class="library_actual">
          <div class="row">
              <div class="col-12">
                  <div class="fav-like">
                      <div class="live-heding">
                          <h4>{{messageExchangeThread?.question?.subject | titlecase}}</h4>
                      </div>                                       
                  </div>
                  <div class="live-line">
                    <div *ngIf="messageExchangeThread?.question?.type == 'public'">
                    <ul>
                      <li>Public Message Exchange started on {{messageExchangeThread?.question?.createdAt |date: 'd MMM y'}}</li>
                      <!-- <li>completed on {{messageExchangeThread?.question?.createdAt |date: 'd MMM y'}}</li>
                      <li>Live</li> -->
                    </ul> 
                  </div> 
                  <div *ngIf="messageExchangeThread?.question?.type == 'private'">
                    <ul>
                      <li>Private Message Exchange started on {{messageExchangeThread?.question?.createdAt |date: 'd MMM y'}}</li>
                      <!-- <li>completed on {{messageExchangeThread?.question?.createdAt |date: 'd MMM y'}}</li>
                      <li>Live</li> -->
                    </ul>
                  </div>      
                  </div>
                 <div class="data-scince-subject">
                    <div class="result-box" >
                      <!-- <div class="result li" >
                          <p *ngFor="let tag of messageExchangeThread?.question?.tags">{{tag | titlecase}}</p>
                         
                      </div> -->
                      <!-- <div class="relevant">
                        <span>Bonus <b>3 KPs</b></span>
                      </div> -->
                  </div>
                 </div>
                 <div class="chat-mail">
                  <div class="user-chat w-100">
                    <div class="profile">
                        <img *ngIf="!studentImage" src="assets/images/user-chat-profile.png" alt="img">
                        <img *ngIf="studentImage" [src]="studentImage" alt="img">

                        <p>Submitted  {{messageExchangeThread?.question?.createdAt |date: 'd MMM y'}} by <a href="/student-module/dashboard/student-profile/student-biography"  target="_blank">{{messageExchangeThread?.question?.student[0].firstName}} {{messageExchangeThread?.question?.student[0].lastName}}</a> </p>
                    </div>
                    <div class="application">
                        <!-- <h6>Hi there</h6> -->
                        <p> {{messageExchangeThread?.question?.message | titlecase}}</p>

                        <div class="propairImage" *ngIf = "imageQuestionUrl.length">
                          <img *ngFor="let image of imageQuestionUrl" [src]="image" (click)="imageClick(image)">
                        </div>
                    </div>
                </div>
                <div class="user-chat w-100" *ngFor="let reply of messageExchangeThread?.replyThread">
                  <div class="profile">
                      <img *ngIf="!reply?.ownerId?.image" src="assets/images/user-chat-profile.png" alt="img">
                      <img *ngIf="reply?.ownerId?.image" [src]="reply?.ownerId?.image" alt="img">
                      <p *ngIf="reply?.ownerId.role == 'Student'">Submitted {{reply.createdAt |date: 'd MMM y'}} by <a href="/student-module/dashboard/student-profile/student-biography"  target="_blank">{{reply?.ownerId.firstName}} {{reply?.ownerId.lastName}}</a> </p>
                      <p *ngIf="reply?.ownerId.role == 'admin'">Submitted {{reply.createdAt |date: 'd MMM y'}} by <a >Propair Support</a> </p>

                  </div>
                  <div class="application">
                      <!-- <h6>Hi there</h6> -->
                      <p> {{reply?.reply}}</p>

                      <div class="propairImageUp" *ngIf = "reply.file.length">
                        <img *ngFor="let replyImage of reply.file" [src]="replyImage" (click)="imageClick(replyImage)">
                      </div>
            
                      <!-- <div class="propairImage" *ngIf = "imagereplyUrl.length">
                        <img *ngFor="let image of imagereplyUrl "[src]="image" (click)="imageClick(image)">
                      </div> -->
                  </div>
              </div>
                <div class="replst">
                  <div class="row">
                    <div class="col-md-1">
                        <div class="student-profile">
                          <div class="profile-library">
                              <img *ngIf="!userInfo?.image" src="assets/images/user-chat-profile.png" alt="img">
                              <img *ngIf="userInfo?.image" [src]="userInfo?.image" alt="img">

                            </div>
                        </div>
                    </div>
                    <div class="col-md-11">
                      <div class="library_actual">
                        <div class="row">
                            <div class="col-12">
  
                               <div class="chat-mail">
                               
                                  <div class="user-chat w-100 replycontet-wrapper">
                                    <form [formGroup]="inboxForm">
                                      <textarea class="application textArea" rows="10" (keyup)="keyUp()" maxlength="3200"
                                      placeholder="Enter your Message here..." formControlName="reply"></textarea>

                                      <div class="propairImage" *ngIf = "imageUrl.length">
                                        <div *ngFor=" let image of imageUrl">
                                          <img [src]="image" (click)="fileImageClick(image)">
                                          <span style="margin-right: 13px;"><i class="fa fa-times" aria-hidden="true" (click)="removeImgae(image)"></i></span>
                                        </div>
                                      </div>
                                    </form>
                                  </div>
                                  <!-- <div *ngIf="inboxForm.controls.reply.hasError('maxlength')">
                                    <font color="red"> Please do not exceed 3200 characters </font>
                                  </div> -->
                               </div>
                            </div>
  
                        </div>
                   </div> 
                   <!-- <span class="charter-limit"> <i><span *ngIf="availableMinLength && availableMinLength <= 12">-{{availableMinLength}}</span>
                    <span class = "character" *ngIf="availableMinLength > 12" >{{availableMinLength}}</span></i> /3200 Characters</span> -->
                    </div>
  
                   
                  </div>
                  
                </div>
                <div class="submitting-buttons" id="msform">
                  <div class="relevant">
                    <!-- <span data-toggle="modal" data-target="#thankyou">Bonus <b>3 KPs</b></span> -->
                  </div>
                  <input type="button" name="Cancel" class="cancel same-field" value="Cancel" style="cursor: pointer;"   (click)="cancel()">
                  <!-- <a  class="save "  style="cursor: pointer;" (click)="draft()">Save Draft</a> -->
                  <!-- <input type="button" name="previous" class="previous previous-ab  action-button same-field " value="Save Draft" style="cursor: pointer;"  (click)="draft()"> -->
                  <input type="button" name="previous" class="previous previous-ab  action-button same-field" value="Image uplaod"  style="cursor: pointer;" (click)="FileUpload.click()">
                  <input type="button" name="next" class="next action-button same-field" value="Send" style="cursor: pointer;" (click)="send()">
                </div>
                <div class="form-group fileUpload">
                  <input  type="file" id="file" #FileUpload  (change)="uploadFile($event.target.files)"/>
              </div>
                 </div>
              </div>
  
          </div>
     </div> 
      </div>
    </div>
  </div>
  </div>
 <script>

var textarea = document.querySelector('textarea');

textarea.addEventListener('keydown', autosize);
             
function autosize(){
  var el = this;
  setTimeout(function(){
    el.style.cssText = 'height:auto; padding:0';
    // for box-sizing other than "content-box" use:
    // el.style.cssText = '-moz-box-sizing:content-box';
    el.style.cssText = 'height:' + el.scrollHeight + 'px';
  },0);
}
 </script>